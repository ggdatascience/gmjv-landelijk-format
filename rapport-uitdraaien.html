<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nl" xml:lang="nl"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Standaard rapportage uitdraaien – Uitleg GMJV rapportage in Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tekst-en-layout.html" rel="next">
<link href="./beginnen.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Geen resultaten",
    "search-matching-documents-text": "Gevonden documenten",
    "search-copy-link-title": "Kopieer link om te zoeken",
    "search-hide-matches-text": "Extra overeenkomsten verbergen",
    "search-more-match-text": "meer overeenkomst in dit document",
    "search-more-matches-text": "meer overeenkomsten in dit document",
    "search-clear-button-title": "Wissen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuleren",
    "search-submit-button-title": "Verzenden",
    "search-label": "Zoeken"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Schakel zijbalknavigatie" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./rapport-uitdraaien.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Standaard rapportage uitdraaien</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Schakel zijbalknavigatie" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Zoeken" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Uitleg GMJV rapportage in Quarto</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Zoeken"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introductie</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beginnen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Beginnen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rapport-uitdraaien.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Standaard rapportage uitdraaien</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tekst-en-layout.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tekst, Code invoegen en layout aanpassen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gmjv-functies-gebruiken.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">GMJV Functies Gebruiken</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./voorbeeld_grafieken.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Grafiekfuncties</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./voorbeeld_tekstfuncties.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tekstfuncties</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./voorbeeld_overige_functies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Overige functies</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handige-bronnen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Handige bronnen</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./css.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Aangepaste CSS</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhoudsopgave</h2>
   
  <ul>
  <li><a href="#configuratie-in-frontmatter" id="toc-configuratie-in-frontmatter" class="nav-link active" data-scroll-target="#configuratie-in-frontmatter"><span class="header-section-number">3.1</span> Configuratie in frontmatter</a>
  <ul class="collapse">
  <li><a href="#parameters-onder-params" id="toc-parameters-onder-params" class="nav-link" data-scroll-target="#parameters-onder-params"><span class="header-section-number">3.1.1</span> Parameters onder ‘Params’</a></li>
  <li><a href="#overige-frontmatter-instellingen" id="toc-overige-frontmatter-instellingen" class="nav-link" data-scroll-target="#overige-frontmatter-instellingen"><span class="header-section-number">3.1.2</span> Overige frontmatter instellingen</a></li>
  </ul></li>
  <li><a href="#rapportage-uitdraaien-met-eigen-data" id="toc-rapportage-uitdraaien-met-eigen-data" class="nav-link" data-scroll-target="#rapportage-uitdraaien-met-eigen-data"><span class="header-section-number">3.2</span> Rapportage uitdraaien met eigen data</a>
  <ul class="collapse">
  <li><a href="#frontmatter-aanpassen" id="toc-frontmatter-aanpassen" class="nav-link" data-scroll-target="#frontmatter-aanpassen"><span class="header-section-number">3.2.1</span> Frontmatter aanpassen</a></li>
  <li><a href="#codeblok-instellingen-aanpassen" id="toc-codeblok-instellingen-aanpassen" class="nav-link" data-scroll-target="#codeblok-instellingen-aanpassen"><span class="header-section-number">3.2.2</span> Codeblok Instellingen aanpassen</a></li>
  </ul></li>
  <li><a href="#regionale-enof-landelijke-rapportage-maken" id="toc-regionale-enof-landelijke-rapportage-maken" class="nav-link" data-scroll-target="#regionale-enof-landelijke-rapportage-maken"><span class="header-section-number">3.3</span> Regionale en/of landelijke rapportage maken</a></li>
  <li><a href="#rapporten-per-gemeente-uitdraaien" id="toc-rapporten-per-gemeente-uitdraaien" class="nav-link" data-scroll-target="#rapporten-per-gemeente-uitdraaien"><span class="header-section-number">3.4</span> Rapporten per gemeente uitdraaien</a></li>
  <li><a href="#pdf-uitdraai-en-printbaarheid" id="toc-pdf-uitdraai-en-printbaarheid" class="nav-link" data-scroll-target="#pdf-uitdraai-en-printbaarheid"><span class="header-section-number">3.5</span> PDF uitdraai en Printbaarheid</a>
  <ul class="collapse">
  <li><a href="#pagina-einden-bepalen-d.m.v.-header-1" id="toc-pagina-einden-bepalen-d.m.v.-header-1" class="nav-link" data-scroll-target="#pagina-einden-bepalen-d.m.v.-header-1"><span class="header-section-number">3.5.1</span> Pagina-einden bepalen d.m.v. “Header 1”</a></li>
  <li><a href="#pdf-uitdraaien" id="toc-pdf-uitdraaien" class="nav-link" data-scroll-target="#pdf-uitdraaien"><span class="header-section-number">3.5.2</span> PDF uitdraaien</a></li>
  </ul></li>
  <li><a href="#html-rapporten-uploaden-naar-swing" id="toc-html-rapporten-uploaden-naar-swing" class="nav-link" data-scroll-target="#html-rapporten-uploaden-naar-swing"><span class="header-section-number">3.6</span> HTML-rapporten uploaden naar Swing</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Standaard rapportage uitdraaien</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Het is handig de volgende stappen te doorlopen wanneer je voor het eerst de rapportage gaat uitdraaien:</p>
<ul>
<li>Test eerst of het lukt om de voorbeeldrapportage uit te draaien. Onder <a href="./beginnen.html#R-project-openen-en-voorbeeldrapport-uitdraaien">R project openen en voorbeeldrapport uitdraaien</a> wordt uitgelegd hoe je dit doet.</li>
<li>Lukt dit, render dan de voorbeeldrapportage uit met je eigen data. Hieronder staat uitgelegd hoe je dit doet.</li>
<li>Lukt dit ook, dan kun je de definitieve rapportage uitdraaien. Open hiervoor rechtsonder in Rstudio bij “Files” het bestand <strong>“Rapportage.qmd”</strong>. Zorg dat je ook hier correct verwijst naar je eigen databestanden (zie uitleg hieronder: Rapportage uitdraaien met eigen data).</li>
</ul>
<p>Hieronder staat uitgelegd hoe de voorbeeldrapportage en de definitieve rapportage opgebouwd zijn. Een aantal standaard instellingen worden uitgelegd. Ook wordt uitgelegd hoe je je eigen data in kan laden en hoe je meerdere gemeenterapportages en PDF versies hiervan kunt uitdraaien. De voorbeeldrapportage en definitieve rapportage zijn grotendeels gelijk. Indien deze afwijken van elkaar, wordt dit genoemd.</p>
<section id="configuratie-in-frontmatter" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="configuratie-in-frontmatter"><span class="header-section-number">3.1</span> Configuratie in frontmatter</h2>
<p>De eigenschappen van Quarto documenten kunnen bovenaan in de <em>YAML</em> <em>frontmatter</em> ingesteld worden. In het voorbeeld hieronder wordt een inhoudsopgave ingesteld met de titel “Inhoudsopgave” en aan de rechterkant van het document geplaatst.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">toc-location</span><span class="kw">:</span><span class="at"> right</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">toc-title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Inhoudsopgave"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Open <strong>voorbeeld_rapportage.qmd</strong>. Daar zie je de volgende frontmatter staan:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">""</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lang</span><span class="kw">:</span><span class="at"> nl</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">page-layout</span><span class="kw">:</span><span class="at"> full</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> custom.css</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">TRUE</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc-title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Inhoud"</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">embed-resources</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">params</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">gemeentecode</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">regiocode</span><span class="kw">:</span><span class="at"> </span><span class="dv">23</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">regionaam</span><span class="kw">:</span><span class="at"> </span><span class="st">'GGD Limburg-Noord'</span><span class="co"> # Vul naam zoals in data CBS</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">path_nepdata</span><span class="kw">:</span><span class="at"> </span><span class="st">"nep testdata GMJV - Regionaal trendbestand 2022-2024.sav"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">path_cbs_data</span><span class="kw">:</span><span class="at"> </span><span class="st">"voorbeeld_JongVolWassenenNaarGeslachtEnLeeftijd1Jan2024.xlsx"</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">path_monitor_data_2022</span><span class="kw">:</span><span class="at"> </span><span class="st">"C:/Users/.../"</span><span class="co"> # Vul padnaam naar data 2022 in</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">naam_monitor_data_2022_regionaal</span><span class="kw">:</span><span class="at"> </span><span class="st">"Regiobestand_CGMJV2022_REGIO_versie 4.sav"</span><span class="co"> # Vul naam regionaal bestand 2022 in</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">path_monitor_data_2024</span><span class="kw">:</span><span class="at"> </span><span class="st">"C:/Users/.../"</span><span class="co"> # Vul padnaam naar data 2024 in</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">naam_monitor_data_2024_regionaal</span><span class="kw">:</span><span class="at"> </span><span class="st">"Regiobestand_GMJV2024_REGIO_versie 1.sav"</span><span class="co"> # Vul naam regionaal bestand 2024 in</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">path_hulpfuncties</span><span class="kw">:</span><span class="at"> </span><span class="st">"hulpfuncties.R"</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_nvar</span><span class="kw">:</span><span class="at"> </span><span class="dv">100</span><span class="co"> # Minimum aantal invullers per vraag</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_ncel</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span><span class="co">  # Minimum aantal invullers oper antwoordoptie</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_kleuren_grafiek</span><span class="kw">:</span><span class="at"> !expr c("</span><span class="co">#86B443", "#012C17", "#B2BE97", "#007E48", "#AAD3CC", "#739BD0", "#11265F", "#86848D", "#CB8EB9", "#401B65", "#86848D")</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">default_kleuren_responstabel</span><span class="kw">:</span><span class="at"> !expr c("header" = "</span><span class="co">#012C17", "kleur_1" = "#007E48", "kleur_2" = "#76B82A","kleur_tekst" = "#FFFFFF")</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">is_pdf</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="fu">format-links</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="fu">echo</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="fu">warning</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>De meeste instellingen kan je laten staan. Het volgende moet aangepast of gecontroleerd worden:</p>
<section id="parameters-onder-params" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="parameters-onder-params"><span class="header-section-number">3.1.1</span> Parameters onder ‘Params’</h3>
<ul>
<li><strong>gemeentecode:</strong> hier moet een gemeentecode ingevuld staan die bestaat in je data. Dit is als het ware je voorbeeldgemeente. Als je het rapport uitdraait via de “Render” knop zal een rapport voor die gemeente gemaakt worden.</li>
<li><strong>regiocode:</strong> hier moet de CBS code van je GGD-regio ingevoerd staan. Bij de nepdata staat dit op 23.</li>
<li><strong>regionaam:</strong> hier moet de naam van je GGD-regio ingevoerd staan. Zorg er voor dat deze naam overeenkomt met de naam van je regio in het bestand “JongVolWassenenNaarGeslachtEnLeeftijd1Jan2024.xlsx”. Bij de nepdata is dit GGD Limburg-Noord.</li>
<li><strong>path_..:</strong> voer hier de padnaam naar de map met bestanden in. Er kunnen 2 paths ingevuld worden: één voor de data van 2022 en één voor de data van 2024. path_nepdata, path_cbs_data en path_helpfuncties hoeven <strong>niet</strong> aangepast te worden.</li>
<li><strong>naam_..:</strong> voer hier de bestandsnaam van het regionale bestand in. Er kunnen 2 namen ingevuld worden: één voor de data van 2022 en één voor de data van 2024.</li>
<li><strong>default_nvar:</strong> hier is het algemene minimum aantal respondenten per vraag ingevoerd.</li>
<li><strong>default_ncel:</strong> hier is het algemene minimum aantal respondenten per antwoordoptie ingevoerd.</li>
<li><strong>default_kleuren_grafiek:</strong> hier is een vector in met de standaard kleurcodes voor grafieken ingevoerd.</li>
<li><strong>default_kleuren_responstabel:</strong> hier is een named vector ingevoerd met 4 kleurcodes als standaard voor responstabellen. Zie het voorbeeld voor de namen.</li>
<li><strong>is_pdf:</strong> dit staat standaard op false, zodat standaard geen pdfs uitgedraaid worden. Zie onderwerp ‘PDF uitdraai en Printbaarheid’ hieronder voor hoe je PDFs van de rapportage uitdraait.</li>
</ul>
</section>
<section id="overige-frontmatter-instellingen" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="overige-frontmatter-instellingen"><span class="header-section-number">3.1.2</span> Overige frontmatter instellingen</h3>
<ul>
<li><strong>lang: nl:</strong> de taal (language) waarin een screenreader de html moet lezen. Deze is standaard ingesteld op Nederlands (nl).</li>
<li><strong>css: custom.css:</strong> hier wordt aangegeven waar de opmaak (in css) gevonden kan worden. Zie ook het hoofdstuk <a href="./css.html">CSS</a>.</li>
<li><strong>path_hulpfuncties: “hulpfuncties.R”:</strong> hier wordt verwezen naar het R-script met functies.</li>
<li><strong>warning:</strong> Deze parameter staat in het voorbeeldrapport op false. Als de parameter op true staat worden mogelijke problemen / ‘warnings’ getoond in het rapport. Dit is meestal niet wenselijk voor het eindproduct, maar nuttig tijdens ontwikkeling.</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled" title="Let op">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Let op
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wees je ervan bewust dat eventuele problemen met het verwerken van de data NIET getoond worden als warning op false staat. Zorg ervoor dat deze parameter bij het ontwikkelen van het rapport op ‘true’ staat, zodat je op de hoogte bent van de warnings.</p>
</div>
</div>
<ul>
<li><strong>echo:</strong> Standaard op false. Als deze parameter op true staat worden codeblokjes in het rapport getoond.</li>
<li><strong>message:</strong> Standaard op false. Als deze parameter op true staat worden berichten van packages getoond.</li>
</ul>
</section>
</section>
<section id="rapportage-uitdraaien-met-eigen-data" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="rapportage-uitdraaien-met-eigen-data"><span class="header-section-number">3.2</span> Rapportage uitdraaien met eigen data</h2>
<p>Om de (voorbeeld)rapportage met eigen data uit te draaien moeten enkele aanpassingen gedaan worden in de frontmatter. Standaard wordt namelijk nepdata ingeladen. Dit is data die lijkt op de data van de Gezondheidsmonitor Jongvolwassenen, maar geen echte deelnemers bevat. Het nepdata bestand bevat data op landelijk, regio en gemeentelijk niveau en van onderzoeksjaren 2022 en 2024 (en is daarmee en trendbestand). De nepdata staat op github en wordt standaard meegedownload wanneer je de ‘repository’ <a href="https://github.com/ggdatascience/gmjv-landelijk-format">gmjv-landelijk-format</a> download. Het bestand heet nep ‘testdata GMJV - Regionaal trendbestand 2022-2024.sav’.</p>
<p>Om je eigen data te gebruiken i.p.v. de nepdata, moeten er 2 dingen gedaan worden:</p>
<ul>
<li>Frontmatter aanpassen</li>
<li>Codeblok Instellingen aanpassen</li>
</ul>
<section id="frontmatter-aanpassen" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="frontmatter-aanpassen"><span class="header-section-number">3.2.1</span> Frontmatter aanpassen</h3>
<p>In de frontmatter moet aangepast worden:</p>
<ul>
<li><strong>gemeentecode:</strong> Voer hier een gemeentecode in die bestaat in je data. Dit is als het ware je voorbeeldgemeente. Als je het rapport uitdraait via de “Render” knop zal een rapport voor die gemeente gemaakt worden.</li>
<li><strong>regiocode:</strong> voer hier de CBS code van je GGD-regio in.</li>
<li><strong>regionaam:</strong> voer hier de naam van je GGD-regio in. Zorg er voor dat deze naam overeenkomt met de naam van je regio in het bestand “JongVolWassenenNaarGeslachtEnLeeftijd1Jan2024.xlsx”.</li>
<li><strong>path_monitor_data_2022</strong>: voer hier de padnaam naar de data van 2022 in en sluit af met een /.</li>
<li><strong>naam_monitor_data_2022_regionaal:</strong> voer hier de naam van het regionale databestand van 2022 in. Deze moet eindigen op .sav</li>
<li><strong>path_monitor_data_2024</strong>: voer hier de padnaam naar de data van 2024 in en sluit af met een /.</li>
<li><strong>naam_monitor_data_2024_regionaal:</strong> voer hier de naam van het regionale databestand van 2022 in. Deze moet eindigen op .sav</li>
</ul>
</section>
<section id="codeblok-instellingen-aanpassen" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="codeblok-instellingen-aanpassen"><span class="header-section-number">3.2.2</span> Codeblok Instellingen aanpassen</h3>
<p>Scroll in de (voorbeeld)rapportage naar beneden tot je bij het eerste codeblok komt. Deze heet Instellingen en start met:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Libraries inladen</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Het script maakt gebruik van een aantal packages</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Deze moeten bij de eerste keer lokaal worden geinstalleerd</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># benodigde packages installeren als deze afwezig zijn</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>pkg_nodig <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"gt"</span>, <span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span>, <span class="st">"tidyr"</span>, <span class="st">"haven"</span>, <span class="st">"stringr"</span>, <span class="st">"labelled"</span>, </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"survey"</span>, <span class="st">"glue"</span>, <span class="st">"plotly"</span>, <span class="st">"forcats"</span>, <span class="st">"openxlsx"</span>, <span class="st">"showtext"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (pkg <span class="cf">in</span> pkg_nodig) {</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">system.file</span>(<span class="at">package =</span> pkg) <span class="sc">==</span> <span class="st">""</span>) {</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">install.packages</span>(pkg)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Hieronder worden de benodige packages geladen</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># etc...</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Iets verder in dit blok wordt de data ingeladen. Hier zijn 2 opties: nepdata inladen of eigen data inladen.</p>
<p>De nepdata wordt standaard ingeladen. Dit gebeurt met deze code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="do">## OPTIE 1: Nepdata</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Lees SPSS bestand &amp; converteer 'user-missing' naar missing in R (NA)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>monitor_df <span class="ot">=</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(params<span class="sc">$</span>path_nepdata, <span class="at">user_na =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Standaardisatiefactor_regio =</span> Standaardisatiefactor,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Stratum_regio =</span> Stratum) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Standaardisatiefactor_gemeente =</span> Standaardisatiefactor_regio,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Stratum_gemeente =</span> Stratum_regio) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>()</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Label toevoegen aan ongelabelde jaarindicator</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(monitor_df<span class="sc">$</span>AGOJB401, <span class="dv">2024</span>) <span class="ot">&lt;-</span> <span class="st">'2024'</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">val_label</span>(monitor_df<span class="sc">$</span>AGOJB401, <span class="dv">2022</span>) <span class="ot">&lt;-</span> <span class="st">'2022'</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Als je je eigen, echte data wil inladen, moet dit stuk code in comments (#) gezet worden. R ziet dit dan als tekst en niet meer als code. De makkelijkste manier om dit te doen, is om alle regels te selecteren en dan CTRL + Shift + R in te drukken. Op deze manier worden alle regels in één keer een comment. Het ziet er dan zo uit:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ## OPTIE 1: Nepdata</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># #Lees SPSS bestand &amp; converteer 'user-missing' naar missing in R (NA)</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># monitor_df = haven::read_spss(params$path_nepdata, user_na =T) %&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   rename(Standaardisatiefactor_regio = Standaardisatiefactor,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#          Stratum_regio = Stratum) %&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(Standaardisatiefactor_gemeente = Standaardisatiefactor_regio,</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#          Stratum_gemeente = Stratum_regio) %&gt;%</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   labelled::user_na_to_na()</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># # Label toevoegen aan ongelabelde jaarindicator</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># val_label(monitor_df$AGOJB401, 2024) &lt;- '2024'</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># val_label(monitor_df$AGOJB401, 2022) &lt;- '2022'</span></span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vervolgens moeten we zorgen dat optie 2, de optie om eigen data in te laden, aan staat. Hiervoor moeten we alle comments weghalen van dit stuk. Ook daarvoor kun je alle code selecteren en op CTRL + Shift + R in drukken. Alle onderstaande code moet dan <strong>niet</strong> meer in comments staan:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## OPTIE 2: Eigen data invoeren (landelijk + regionaal)</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Data 2024</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Landelijk bestand inladen</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="fu">paste0</span>(params<span class="sc">$</span>path_monitor_data_2024, <span class="st">"Totaalbestand_GMJV2024_GGD_versie 1 (N = 135.666).sav"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">user_na =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>()</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Regionaal bestand inladen</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>df_regio <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="fu">paste0</span>(params<span class="sc">$</span>path_monitor_data_2024, params<span class="sc">$</span>naam_monitor_data_2024_regionaal),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">user_na =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>()</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Check of aantallen gelijk zijn.</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># NB. Alleen deelnemers met landelijke weegfactor zitten in landelijk bestand.</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">sum</span>(df_regio<span class="sc">$</span>Standaardisatiefactor_regio <span class="sc">!=</span> <span class="dv">0</span>, <span class="at">na.rm =</span> T) <span class="sc">!=</span> <span class="fu">nrow</span>(df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(GGDregio <span class="sc">==</span> params<span class="sc">$</span>regiocode))) {</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Aantal deelnemers in regio is niet hetzelfde in beide bestanden, check data."</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter regio uit landelijk databestand</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(GGDregio <span class="sc">!=</span> params<span class="sc">$</span>regiocode)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg regiobestand toe aan landelijk bestand</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>monitor_df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(df_regio)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Opschonen</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(df_regio, df)</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="co">#Data 2022</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co">#Landelijk bestand inladen</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="fu">paste0</span>(params<span class="sc">$</span>path_monitor_data_2022, <span class="st">"Totaalbestand_CGMJV2022_GGD_versie 3 (N = 69.750).sav"</span>),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                       <span class="at">user_na =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Standaardisatiefactor_regio =</span> Standaardisatiefactor,</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">Stratum_regio =</span> Stratum) <span class="sc">%&gt;%</span> <span class="co"># Standaardidatiefactor en andere indicatoren hernoemen. </span><span class="al">TODO</span><span class="co"> weghalen na trendsyntax?</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>()</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Regionaal bestand inladen</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>df_regio <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="fu">paste0</span>(params<span class="sc">$</span>path_monitor_data_2022, params<span class="sc">$</span>naam_monitor_data_2022_regionaal),</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">user_na =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Standaardisatiefactor_regio =</span> Standaardisatiefactor,</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">Stratum_regio =</span> Stratum,</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">Invulduur =</span> duur) <span class="sc">%&gt;%</span> <span class="co"># Standaardidatiefactor en andere indicatoren hernoemen. </span><span class="al">TODO</span><span class="co"> weghalen na trendsyntax?</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  labelled<span class="sc">::</span><span class="fu">user_na_to_na</span>()</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Check of aantallen gelijk zijn.</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="co"># NB. Alleen deelnemers met landelijke weegfactor zitten in landelijk bestand.</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">sum</span>(df_regio<span class="sc">$</span>Standaardisatiefactor_regio <span class="sc">!=</span> <span class="dv">0</span>, <span class="at">na.rm =</span> T) <span class="sc">!=</span> <span class="fu">nrow</span>(df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(GGDregio <span class="sc">==</span> params<span class="sc">$</span>regiocode))) {</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Aantal deelnemers in regio is niet hetzelfde in beide bestanden, check data."</span>)</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter regio uit landelijk databestand</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(GGDregio <span class="sc">!=</span> params<span class="sc">$</span>regiocode)</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg regiobestand toe aan landelijk bestand</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(df_regio) <span class="sc">%&gt;%</span></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">colnames</span>(df)[<span class="sc">!</span>(<span class="fu">colnames</span>(df) <span class="sc">%in%</span> <span class="fu">colnames</span>(monitor_df))]) <span class="co"># selecteer alleen kolommen die ook in 2024 data zitten</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg bestand van 2022 toe aan bestand van 2024</span></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>monitor_df <span class="ot">&lt;-</span> monitor_df <span class="sc">%&gt;%</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(df)</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Opschonen</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(df_regio, df)</span></code><button title="Kopieer naar klembord" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Om te testen of R de data goed inlaad, kun je het eerste codeblok los runnen. Dit doe je door in voorbeeld_rapportage.qmd naar het eerste codeblok ({r Instellingen}) toe te gaan en rechtsboven op de groene driehoek te klikken:</p>
<p><img src="images/clipboard-2050508892.png" class="img-fluid"></p>
<p>R runt nu alleen dit codeblok. Controleer of je errors krijgt. Veel voorkomende fouten:</p>
<ul>
<li><strong>path_monitor_data_2022</strong> en/of <strong>path_monitor_data_2024</strong> eindigt niet op een / waardoor het bestand niet gevonden kan worden. Verander path_monitor_data_2022 en/of path_monitor_data_2024 in de frontmatter.</li>
<li>De naam van het landelijke databestand uit 2022 en/of 2024 is aangepast, waardoor het bestand niet gevonden kan worden. Verander de naam het bestand in het codeblok, zie naar Totaalbestand_GMJV2022_(…) en Totaalbestand_GMJV2024_(…).</li>
</ul>
</section>
</section>
<section id="regionale-enof-landelijke-rapportage-maken" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="regionale-enof-landelijke-rapportage-maken"><span class="header-section-number">3.3</span> Regionale en/of landelijke rapportage maken</h2>
<p>Standaard worden percentages in de (voorbeeld)rapportage getoond op regionaal en/of gemeentelijk niveau. Uitsplitsingen worden standaard op regionaal niveau getoond. Als je een regionale en/of landelijke rapportage wil maken, moet je dit aanpassen. Dit kan door het argument niveau of niveaus aan te passen in alle functies. Zie <a href="./gmjv-functies-gebruiken.html">GMJV Functies gebruiken</a>, <a href="./voorbeeld_grafieken.html">Grafiekfuncties</a>, <a href="./voorbeeld_tekstfuncties.html">Tekstfuncties</a> en <a href="./voorbeeld_overige_functies.html">Overige functies</a> voor meer informatie over functies en hun argumenten.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Quarto bestanden werkt de CTRL + F shortkey ook. Hiermee kun je woorden zoeken en vervangen. Zoek bijvoorbeeld op “gemeente” om overal het niveau “gemeente” te vervangen.</p>
</div>
</div>
</section>
<section id="rapporten-per-gemeente-uitdraaien" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="rapporten-per-gemeente-uitdraaien"><span class="header-section-number">3.4</span> Rapporten per gemeente uitdraaien</h2>
<p>Als je het rapport uitdraait door op de “Render” knop te drukken wordt er één rapport gemaakt dat is ingesteld op de gemeentecode in de <em>frontmatter</em>. Dit is handig om eventuele wijzigingen in het rapport te testen. Als je rapporten voor alle gemeenten wilt uitdraaien volg je de volgende stappen</p>
<ul>
<li>Open <strong>maak_rapport_per_gemeente.R</strong></li>
<li>Controleer of de variabelen <strong>file_path</strong> en <strong>gemeentecodes_in_regio</strong> goed staan ingesteld</li>
<li>Controleer of <strong>input</strong> goed ingesteld staat. Deze staat standaard op “voorbeeld_rapportage.qmd” maar mogelijk wil je dit wijzigen naar “Rapportage.qmd”.</li>
<li>Draai de rest van de code.</li>
</ul>
<p>Het script gaat met een <em>loop</em> langs alle gemeentecodes en maakt voor iedere gemeente een rapport.</p>
</section>
<section id="pdf-uitdraai-en-printbaarheid" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="pdf-uitdraai-en-printbaarheid"><span class="header-section-number">3.5</span> PDF uitdraai en Printbaarheid</h2>
<p>Op verzoek is het mogelijk gemaakt de rapportage als PDF op te slaan en te zorgen dat deze printbaar is. De eerste stap hiervoor is bedenken of het wel nodig is om het rapport te printen. Meestal is dat niet zo. Als het toch nodig blijkt volg je de onderstaande stappen.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Rapportages versturen">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rapportages versturen
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Wil je de rapportages via de mail delen? Kies dan niet voor html bestanden in de bijlage. Dit zijn vrij grote bestanden en sommige spam-filters zien html bestanden als spam. In plaats daarvan kun je in de mail verwijzen naar de website met de html-rapportage. Wil je toch bestanden meesturen met de mail? Draai dan de bestanden als PDF uit en voeg ze als PDF toe als bijlage.</p>
</div>
</div>
</div>
<section id="pagina-einden-bepalen-d.m.v.-header-1" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="pagina-einden-bepalen-d.m.v.-header-1"><span class="header-section-number">3.5.1</span> Pagina-einden bepalen d.m.v. “Header 1”</h3>
<p>In een browser bestaan pagina’s niet echt. De standaard html-uitvoer van het rapport heeft dan ook geen pagina’s. Wanneer je een rapport gaat printen zijn pagina-einden wel belangrijk. Daarom is voor deze rapportage ingesteld dat pagina-einden altijd vóór een kop van niveau 1 vallen.</p>
<p>Let daarom goed op dat je alleen een kop van niveau 1 maakt als je een nieuwe pagina wilt beginnen.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Waarschuwing
</div>
</div>
<div class="callout-body-container callout-body">
<p>Controleer altijd de pdf-uitvoer op het mooi overlopen van pagina’s</p>
<p>Er zijn grenzen aan hoe veel er op één pagina past. Als je te veel grafieken of tekst onder een header van niveau 1 plaatst, zal alles wat niet past naar de volgende pagina gaan. Te veel inhoud onder één header kan dus alsnog voor een arbitraire overgang van paginas zorgen.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Aangepaste eigenschappen Header 1">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aangepaste eigenschappen Header 1
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Headers van niveau 1 krijgen voor de GMJV rapportage standaard een gekleurde achtergrond en beginnen (bij conversie naar pdf) altijd op een nieuwe pagina.</p>
<p>Dit zijn aangepaste eigenschappen die worden bepaald in het CSS-bestand “custom.css”. Je kan deze eigenschappen in dat bestand uitzetten of wijzigen. Zie ook het hoofdstuk <a href="./css.html">CSS</a>.</p>
</div>
</div>
</div>
</section>
<section id="pdf-uitdraaien" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="pdf-uitdraaien"><span class="header-section-number">3.5.2</span> PDF uitdraaien</h3>
<p>Als de pagina-einden goed ingesteld staan kan je de rapportage als PDF bestand uitdraaien. Let hierbij op dat je ten minste Google Chrome 128 hebt. Zie daarvoor <a href="./beginnen.html#voor-pdf-uitdraai">‘PDF-uitdraai’ in het hoofdstuk ‘Beginnen’</a>.</p>
<ul>
<li>Open het bestand <strong>maak_pdf_rapport.R</strong></li>
<li>Controleer of de variabelen <strong>file_path</strong>, <strong>gemeentecodes_in_regio</strong> goed staan ingesteld.</li>
<li>Controleer of <strong>input</strong> goed ingesteld staat. Deze staat standaard op “voorbeeld_rapportage.qmd” maar mogelijk wil je dit wijzigen naar “Rapportage.qmd”.</li>
<li>Draai het hele script.</li>
<li>Controleer de uitvoer.</li>
</ul>
</section>
</section>
<section id="html-rapporten-uploaden-naar-swing" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="html-rapporten-uploaden-naar-swing"><span class="header-section-number">3.6</span> HTML-rapporten uploaden naar Swing</h2>
<p>Als je een html-bestand naar Swing upload en in de Viewer plaatst gaat dat niet automatisch goed. De layout van het bestand overhoop raken. Dit komt omdat de opmaak (CSS) van Swing zelf ook doorwerkt op het html-document. Dit kan je oplossen door raporten standaard in een ‘iframe’ te plaatsen. Dit is relatief makkelijk in te stellen in Swing.</p>
<ul>
<li>Log in bij Swing Studio als Admin</li>
<li>Kies Viewer &gt; Settings &gt; Viewer Settings</li>
<li>Zoek de optie “Show report in an iframe” en vink deze optie aan</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Gekopieerd!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Gekopieerd!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./beginnen.html" class="pagination-link" aria-label="Beginnen">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Beginnen</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./tekst-en-layout.html" class="pagination-link" aria-label="Tekst, Code invoegen en layout aanpassen">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tekst, Code invoegen en layout aanpassen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>